<div class="c-peer-review-assignment c-peer-card card-rich-interaction"><h2 class="headline-2-text">Instructions</h2><div class="c-peer-review-assignment-intro bt3-row"><div class="bt3-col-md-12"><div data-js="introduction"><div data-reactroot="" class="rc-CML styled"><div><p><strong>Assignment Overview</strong></p><p>In this assignment you will continue the exploration of user authentication. We have already set up the REST API server to validate an ordinary user. Now, you will extend this to verify an Admin and grant appropriate privileges to an Admin. At the end of this assignment, you would have completed the following:</p><ul><li>Check if a verified ordinary user also has admin privileges.</li><li>Allow an ordinary user to only perform GET operatioins</li><li>Allow only an Admin to perform POST, PUT and DELETE operations</li><li>Allow an Admin to be able to GET all the registered users' information from the database</li></ul><p><strong>Assignment Requirements</strong></p><p><strong>This assignment is divided into three tasks as detailed below:</strong></p><p><strong>Task 1</strong></p><p><strong>In this task you will implement a new function named <em>verifyAdmin() </em>in <em>verify.js</em> file. This function will check an ordinary user to see if s/he has Admin privileges. In order to perform this check, note that all users have an additional field stored in their records named <em>admin</em>, that is a boolean flag, set to <em>false</em> by default. Furthermore, when the user's token is checked in <em>verifyOrdinaryUser()</em> function, it will load a new property named <em>decoded</em> to the <em>request</em> object. This will be available to you if the <em>verifyAdmin()</em> follows <em>verifyOrdinaryUser()</em> in the middleware order in Express. From this  <em>req</em> object, you can obtain the admin flag of the user's information by using the following expression:</strong></p><pre contenteditable="false" data-language="javascript" style="height: 48px; opacity: 1;" class=" ace_editor ace-tomorrow"><textarea class="ace_text-input" wrap="off" autocorrect="off" autocapitalize="off" spellcheck="false" style="opacity: 0; left: 239.434px; top: 0px; height: 16px; width: 7.20125px;"></textarea><div class="ace_gutter"><div class="ace_layer ace_gutter-layer ace_folding-enabled" style="margin-top: 0px; height: 80px; width: 41px;"><div class="ace_gutter-cell " style="height: 16px;">1</div></div><div class="ace_gutter-active-line" style="top: 0px; height: 16px;"></div></div><div class="ace_scroller" style="left: 41px; right: 0px; bottom: 0px;"><div class="ace_content" style="margin-top: 0px; width: 737px; height: 80px; margin-left: 0px;"><div class="ace_layer ace_print-margin-layer"><div class="ace_print-margin" style="left: 580.1px; visibility: visible;"></div></div><div class="ace_layer ace_marker-layer"></div><div class="ace_layer ace_text-layer" style="padding: 0px 4px;"><div class="ace_line_group" style="height:16px"><div class="ace_line" style="height:16px">     <span class="ace_identifier">req</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">decoded</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">_doc</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">admin</span></div></div></div><div class="ace_layer ace_marker-layer"></div><div class="ace_layer ace_cursor-layer ace_hidden-cursors"><div class="ace_cursor" style="left: 198.434px; top: 0px; width: 7.20125px; height: 16px;"></div></div></div></div><div class="ace_scrollbar ace_scrollbar-v" style="display: none; width: 19px; bottom: 0px;"><div class="ace_scrollbar-inner" style="width: 19px; height: 16px;"></div></div><div class="ace_scrollbar ace_scrollbar-h" style="height: 19px; left: 41px; right: 0px; display: none;"><div class="ace_scrollbar-inner" style="height: 19px; width: 737px;"></div></div><div style="height: auto; width: auto; top: 0px; left: 0px; visibility: hidden; position: absolute; white-space: pre; font-style: inherit; font-variant: inherit; font-weight: inherit; font-stretch: inherit; font-size: inherit; line-height: inherit; font-family: inherit; overflow: hidden;"><div style="height: auto; width: auto; top: 0px; left: 0px; visibility: hidden; position: absolute; white-space: pre; font-style: inherit; font-variant: inherit; font-weight: inherit; font-stretch: inherit; font-size: inherit; line-height: inherit; font-family: inherit; overflow: visible;"></div><div style="height: auto; width: auto; top: 0px; left: 0px; visibility: hidden; position: absolute; white-space: pre; font-style: inherit; font-variant: inherit; font-stretch: inherit; font-size: inherit; line-height: inherit; font-family: inherit; overflow: visible;">XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX</div></div></pre><p>You can use this to decide if the user is an administrator. The <em>verifyAdmin() </em>function will return <em>Next();</em> if the user is an admin, otherwise it will return Next(err);</p><p><strong>Task2</strong></p><p>In this task you will update all the routes in the REST API to ensure that ordinary users are restricted only to perform GET operations. On the other hand, Admins can perform POST, PUT and DELETE operations. Update the code for all the routers to support this.</p><p><strong>Task 3</strong></p><p>In this task you will now activate the /users REST API end point. When an Admin sends a GET request to <a href="http://localhost:3000/users" target="_blank" rel="noopener nofollow">http://localhost:3000/users</a> you will return the details of all the users. If an ordinary user performs this operation, you should return a reply with the status of 403, and a message "You are not authorized to perform this operation!".</p></div></div></div></div></div><div data-js="instruction-sections" class="c-peer-review-assignment-sections"><div><div class="c-peer-review-assignment-section bt3-row"><div class="bt3-col-md-12"><div data-js="title-container" class="c-peer-review-assignment-section-title-container active"><span class="body-2-text">Review criteria</span><span data-js="section-toggle" class="c-peer-review-assignment-section-title-toggle body-2-text"><span data-js="section-content-show-more" style="display: none;">more&nbsp;<em class="c-peer-review-assignment-section-title-toggle-arrow cif-chevron-down"></em></span><span data-js="section-content-show-less" style="display: inline;">less&nbsp;<em class="c-peer-review-assignment-section-title-toggle-arrow cif-chevron-up"></em></span></span></div><div class="open"><div data-js="section-content-container" class="c-peer-review-assignment-section-content"><div data-js="section-content"><div data-reactroot="" class="rc-CML styled"><div><p>Your assignment will be graded based on the following criteria:</p><p><strong>Task 1</strong></p><ul><li>You have implemented the <em>verifyAdmin()</em> function in <em>verify.js</em>.</li><li>The <em>verifyAdmin()</em> function will allow you to proceed forward along the normal path of middleware execution if you are an Admin</li><li>The <em>verifyAdmin()</em> function will prevent you from proceeding further if you do not have Admin privileges, and will send an error message to you in the reply.</li></ul><p><strong>Task 2</strong></p><ul><li>An ordinary user is restricted only to perform the GET operation on the resources/REST API end points.</li><li>An Admin (who must be first checked to make sure is an ordinary user), can perform the GET, PUT, POST and DELETE operations on any of the resources/ REST API end points.</li></ul><p><strong>Task 3</strong></p><ul><li>A GET operation on <a href="http://localhost:3000/users" target="_blank" rel="noopener nofollow">http://localhost:3000/users</a> by an Admin will return the details of the registered users</li><li>An ordinary user (without Admin privileges) cannot perform the GET operation on http://localhost:3000/users.</li></ul></div></div></div></div></div></div></div></div></div></div>